From fc58e80733bc93ea23d047070be1f21d9984a345 Mon Sep 17 00:00:00 2001
From: "Mazlan, Hazwan Arif" <hazwan.arif.mazlan@intel.com>
Date: Tue, 28 Dec 2021 20:45:27 +0800
Subject: [PATCH 1/2] gmmlib: Enable RPL-S

Rebased on top of intel-gmmlib-22.0.1

Signed-off-by: Chew, Tong Liang <tong.liang.chew@intel.com>
Rebased-by: Mazlan, Hazwan Arif <hazwan.arif.mazlan@intel.com>
---
 Source/GmmLib/Platform/GmmGen12Platform.cpp | 1 +
 Source/inc/common/igfxfmid.h                | 8 ++++++++
 2 files changed, 9 insertions(+)

diff --git a/Source/GmmLib/Platform/GmmGen12Platform.cpp b/Source/GmmLib/Platform/GmmGen12Platform.cpp
index 5f53888c93f3..a881bd9174e9 100644
--- a/Source/GmmLib/Platform/GmmGen12Platform.cpp
+++ b/Source/GmmLib/Platform/GmmGen12Platform.cpp
@@ -315,6 +315,7 @@ FCRECTALIGN(TILE__64_2D_128bpe, 128,  32,  32,   32, 32);
     else if(GFX_GET_CURRENT_PRODUCT(Data.Platform) == IGFX_ALDERLAKE_S ||
        (GFX_GET_CURRENT_PRODUCT(Data.Platform) == IGFX_ALDERLAKE_P) || 
        (GFX_GET_CURRENT_PRODUCT(Data.Platform) == IGFX_ALDERLAKE_N) ||
+       (GFX_GET_CURRENT_PRODUCT(Data.Platform) == IGFX_RAPTORLAKE_S) ||
        (GFX_GET_CURRENT_PRODUCT(Data.Platform) >= IGFX_XE_HP_SDV))
     {
         Data.NoOfBitsSupported                = 46;
diff --git a/Source/inc/common/igfxfmid.h b/Source/inc/common/igfxfmid.h
index 5b543bad41e3..4e77cc2748de 100644
--- a/Source/inc/common/igfxfmid.h
+++ b/Source/inc/common/igfxfmid.h
@@ -71,6 +71,7 @@ typedef enum {
     IGFX_ALDERLAKE_S,
     IGFX_ALDERLAKE_P,
     IGFX_ALDERLAKE_N,
+    IGFX_RAPTORLAKE_S,
     IGFX_DG1  = 1210,
     IGFX_XE_HP_SDV = 1250,
     IGFX_DG2 = 1270,
@@ -104,6 +105,7 @@ typedef enum {
     PCH_JSP_N,          // JSL N PCH Device IDs for JSL+ Rev02
     PCH_ADL_S,          // ADL_S PCH
     PCH_ADL_P,          // ADL_P PCH
+    PCH_RPL_S,          // RPL_S PCH
     PCH_TGL_H,          // TGL H PCH
     PCH_ADL_N,          // ADL_N PCH
     PCH_PRODUCT_FAMILY_FORCE_ULONG = 0x7fffffff
@@ -1363,6 +1365,12 @@ typedef enum __NATIVEGTTYPE
 #define DEV_ID_46C2                             0x46C2
 #define DEV_ID_46C3                             0x46C3
 
+//RPL-S PCH Device IDs
+#define DEV_ID_A780                             0xA780
+#define DEV_ID_A781                             0xA781
+#define DEV_ID_A782                             0xA782
+#define DEV_ID_A783                             0xA783
+
 //ICL PCH LP Device IDs
 #define ICP_LP_RESERVED_FUSE_ID                 0x3480
 #define ICP_LP_U_SUPER_SKU_ID                   0x3481
-- 
2.34.1

